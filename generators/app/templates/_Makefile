build:
	docker run --rm -v "$(PWD)":/go/src/handler \
	lambci/lambda:build-go1.x \
	sh -c 'dep ensure && go build -o handler'
run:
	docker run \
	-e "AWS_LAMBDA_FUNCTION_MEMORY_SIZE=256" \
	-e AWS_ACCESS_KEY_ID="$(AWS_ACCESS_KEY_ID)" \
	-e AWS_SECRET_ACCESS_KEY="$(AWS_SECRET_ACCESS_KEY)" \
	--rm -v "$(PWD)":/var/task lambci/lambda:go1.x handler